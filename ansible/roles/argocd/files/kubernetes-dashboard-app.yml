apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: kubernetes-dashboard
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://kubernetes.github.io/dashboard/
    chart: kubernetes-dashboard
    targetRevision: 6.0.8
    helm:
      parameters:
        - name: ingress.enabled
          value: "true"
        - name: ingress.hosts[0].host
          value: "dashboard.example.com"
        - name: ingress.hosts[0].paths[0].path
          value: "/"
        - name: ingress.hosts[0].paths[0].pathType
          value: "Prefix"
        - name: ingress.ingressClassName
          value: "nginx"
        - name: ingress.annotations."nginx\.ingress\.kubernetes\.io/backend-protocol"
          value: "HTTPS"
        - name: ingress.annotations."nginx\.ingress\.kubernetes\.io/force-ssl-redirect"
          value: "true"
        - name: metricsScraper.enabled
          value: "true"
        - name: metrics-server.enabled
          value: "false"
  destination:
    name: in-cluster
    namespace: kubernetes-dashboard
  syncPolicy:
    syncOptions:
      - CreateNamespace=true
    automated:
      prune: true
      selfHeal: true
